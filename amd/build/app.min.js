define(["jquery","tool_meta/jquery.dataTables","tool_meta/dataTables.bootstrap"],function(a,b,c){function d(a){-1===_.indexOf(f,a)&&f.push(a)}function e(a){f=_.reject(f,function(b){return b===a})}var f=[];return{init:function(){var b=a(".index_course_table_wrap #coursetable").DataTable({autoWidth:!1,columns:[{orderable:!0},{orderable:!0}],columnDefs:[{searchable:!0,visible:!1,targets:[0]}],dom:'rt<"coursetable_pages"lp>'});a(".index_course_table_wrap #search_box").on("change paste keyup",function(){a(this).val().length>1?b.search(a(this).val(),!1,!0):b.search(""),b.draw()}),a(document).on("click",".index_course_table_wrap #coursetable tbody tr",function(b){return b.target===a(".course_link",this)[0]?!0:(window.location=a(this).attr("href"),!1)});var c=a(".add_course_table_wrap #coursetable").DataTable({autoWidth:!1,columns:[{className:"shortname",orderable:!1},{className:"name",orderable:!0},{className:"enrols",orderable:!0}],columnDefs:[{searchable:!0,visible:!1,targets:[0]},{searchable:!1,visible:!0,targets:[1]},{searchable:!1,visible:!0,targets:[2]}],dom:'rt<"coursetable_pages"lp>'});a(".add_course_table_wrap #search_box").on("change paste keyup",function(){console,a(this).val().length>1?c.search(a(this).val(),!1,!0):c.search(""),c.draw()}),a(document).on("click",".add_course_table_wrap #coursetable tbody tr",function(b){if(b.target===a(".course_link",this)[0])return!0;var c=Number(a(this).attr("course"));return a(this).hasClass("selected")?(e(c),a(this).removeClass("selected"),a(this).find("td.name .fa").remove()):(d(c),a(this).addClass("selected"),a(this).find("td.name").prepend('<i class="fa fa-check"></i>')),!1}),a("#sel").click(function(){a(this).addClass("hidden"),a("#desel").removeClass("hidden");var b=c.rows();a.each(b,function(b,c){var e=Number(a(c).attr("course"));d(e),a(c).addClass("selected")})}),a("#desel").click(function(){a(this).addClass("hidden"),a("#sel").removeClass("hidden");var b=c.rows();a.each(b,function(b,c){var d=Number(a(c).attr("course"));e(d),a(c).removeClass("selected")})}),a("#add_enrol").click(function(){a("#courses").val(JSON.stringify(f)),a("#meta_enrol_sub").click()})}}});