define(["jquery","tool_meta/jquery.dataTables","tool_meta/dataTables.bootstrap"],function(a,b,d){return{init:function(){function b(a){-1===_.indexOf(e,a)&&e.push(a)}function d(a){e=_.reject(e,function(b){return b===a})}var e=[],f=a(".index_course_table_wrap #coursetable").DataTable({autoWidth:!1,columns:[{orderable:!0},{orderable:!0}],columnDefs:[{searchable:!0,visible:!1,targets:[0]}],dom:'rt<"coursetable_pages"lp>'});a(".index_course_table_wrap #search_box").keyup(function(){a(this).val().length>1?f.search(a(this).val()):f.search("")});var g=a(".add_course_table_wrap #coursetable").DataTable({autoWidth:!1,columns:[{className:"shortname",orderable:!1},{className:"name",orderable:!0},{className:"enrols",orderable:!0}],columnDefs:[{searchable:!0,visible:!1,targets:[0]},{searchable:!1,visible:!0,targets:[1]},{searchable:!1,visible:!0,targets:[2]}],dom:'rt<"coursetable_pages"lp>'});a(".add_course_table_wrap #search_box").keyup(function(){a(this).val().length>1?g.search(a(this).val()):g.search("")}),a(document).on("click",".index_course_table_wrap #coursetable tbody tr",function(b){return b.target===a(".course_link",this)[0]?!0:(window.location=a(this).attr("href"),!1)}),a(document).on("click",".add_course_table_wrap #coursetable tbody tr",function(e){return e.target===a(".course_link",this)[0]?!0:(c=Number(a(this).attr("course")),a(this).haclassName("selected")?(d(c),a(this).removeClass("selected")):(b(c),a(this).addClass("selected")),!1)}),a("#sel").click(function(){a(this).addClass("hidden"),a("#desel").removeClass("hidden");var c=g.rows();a.each(c,function(c,d){var e=Number(a(d).attr("course"));b(e),a(d).addClass("selected")})}),a("#desel").click(function(){a(this).addClass("hidden"),a("#sel").removeClass("hidden");var b=g.fnGetNodes();a.each(b,function(b,c){var e=Number(a(c).attr("course"));d(e),a(c).removeClass("selected")})}),a("#add_enrol").click(function(){a("#courses").val(JSON.stringify(e)),a("#meta_enrol_sub").click()})}}});